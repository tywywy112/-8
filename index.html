<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>Flag Match AI Game</title>

<style>
body{
    font-family: Arial;
    background:#eef2ff;
    text-align:center;
    padding:30px;
}
.box{
    background:white;
    padding:20px;
    border-radius:15px;
    max-width:650px;
    margin:auto;
}
.flag{
    font-size:90px;
    margin:15px 0;
}
button{
    width:260px;
    padding:12px;
    margin:6px;
    border:none;
    border-radius:12px;
    background:#4f46e5;
    color:white;
    font-size:16px;
    cursor:pointer;
}
button:hover{ background:#4338ca; }
.hidden{ display:none; }
.top{
    display:flex;
    justify-content:space-between;
    font-weight:bold;
    margin-bottom:10px;
}
</style>
</head>

<body>

<!-- ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å -->
<div class="box" id="menu">
    <h1>üåç Flag Match AI Game</h1>
    <p>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏°‡∏¥‡∏ô‡∏¥‡πÄ‡∏Å‡∏°</p>
    <button onclick="startGame('continent')">üü¶ ‡∏ó‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏ß‡∏µ‡∏õ</button><br>
    <button onclick="startGame('country')">üü® ‡∏ó‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®</button>
</div>

<!-- ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏Å‡∏° -->
<div class="box hidden" id="game">
    <div class="top">
        <div>‚úÖ ‡∏ñ‡∏π‡∏Å: <span id="correct">0</span></div>
        <div>‚ùå ‡∏ú‡∏¥‡∏î: <span id="wrong">0</span></div>
        <div>‚è± <span id="time">10</span>s</div>
    </div>

    <button onclick="pauseToMenu()">‚è∏ ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</button>

    <h3 id="title"></h3>
    <div class="flag" id="flag">üè≥Ô∏è</div>
    <div id="choices"></div>
</div>

<!-- ‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏£‡∏∏‡∏õ -->
<div class="box hidden" id="summary">
    <h2>üéâ ‡∏à‡∏ö‡πÄ‡∏Å‡∏°</h2>
    <p>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ: <span id="sumCorrect"></span> / 100</p>
    <p>‡∏ï‡∏≠‡∏ö‡∏ú‡∏¥‡∏î: <span id="sumWrong"></span> ‡∏Ç‡πâ‡∏≠</p>
    <button onclick="reviewWrong()">üîÅ ‡πÄ‡∏•‡πà‡∏ô‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà‡∏ú‡∏¥‡∏î</button><br>
    <button onclick="resetGame()">üîÑ ‡πÄ‡∏•‡πà‡∏ô‡πÉ‡∏´‡∏°‡πà</button>
</div>

<script>
// =======================
// ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏® (4 ‡∏ó‡∏ß‡∏µ‡∏õ)
// =======================
const continents = ["Asia","Europe","Africa","Australia"];

const countries = [
    {name:"Thailand",flag:"üáπüá≠",continent:"Asia"},
    {name:"Japan",flag:"üáØüáµ",continent:"Asia"},
    {name:"China",flag:"üá®üá≥",continent:"Asia"},
    {name:"India",flag:"üáÆüá≥",continent:"Asia"},
    {name:"Indonesia",flag:"üáÆüá©",continent:"Asia"},

    {name:"France",flag:"üá´üá∑",continent:"Europe"},
    {name:"Germany",flag:"üá©üá™",continent:"Europe"},
    {name:"Italy",flag:"üáÆüáπ",continent:"Europe"},
    {name:"Spain",flag:"üá™üá∏",continent:"Europe"},
    {name:"UK",flag:"üá¨üáß",continent:"Europe"},

    {name:"Egypt",flag:"üá™üá¨",continent:"Africa"},
    {name:"Nigeria",flag:"üá≥üá¨",continent:"Africa"},
    {name:"Kenya",flag:"üá∞üá™",continent:"Africa"},
    {name:"South Africa",flag:"üáøüá¶",continent:"Africa"},
    {name:"Morocco",flag:"üá≤üá¶",continent:"Africa"},

    {name:"Australia",flag:"üá¶üá∫",continent:"Australia"},
    {name:"New Zealand",flag:"üá≥üáø",continent:"Australia"}
];

// =======================
// ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏Å‡∏°
// =======================
let mode="";
let questions=[];
let current;
let index=0;
let correct=0;
let wrong=0;
let wrongList=[];
let time=10;
let timer;
let paused=false;

// =======================
function shuffle(arr){
    return [...arr].sort(()=>Math.random()-0.5);
}

// =======================
function startGame(selected){
    mode = selected;

    document.getElementById("menu").classList.add("hidden");
    document.getElementById("game").classList.remove("hidden");

    document.getElementById("title").innerText =
        mode==="continent" ? "‡∏ó‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏ß‡∏µ‡∏õ" : "‡∏ó‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®";

    if(paused){
        paused=false;
        nextQuestion();
    }else{
        index=0;
        correct=0;
        wrong=0;
        wrongList=[];
        questions = shuffle(countries).slice(0,100);
        nextQuestion();
    }
}

// =======================
function nextQuestion(){
    clearInterval(timer);
    time=10;
    document.getElementById("time").innerText=time;

    if(index>=questions.length){
        endGame();
        return;
    }

    current = questions[index];
    document.getElementById("flag").innerText=current.flag;
    document.getElementById("correct").innerText=correct;
    document.getElementById("wrong").innerText=wrong;

    createChoices();
    timer=setInterval(countdown,1000);
}

// =======================
function createChoices(){
    const box=document.getElementById("choices");
    box.innerHTML="";

    let options=[];
    if(mode==="continent"){
        options=[...continents];
    }else{
        options = shuffle(
            countries.filter(c=>c.continent===current.continent)
        ).slice(0,3).map(c=>c.name);
        if(!options.includes(current.name)) options[0]=current.name;
    }

    shuffle(options).forEach(opt=>{
        const btn=document.createElement("button");
        btn.innerText=opt;
        btn.onclick=()=>answer(opt);
        box.appendChild(btn);
    });
}

// =======================
function answer(ans){
    clearInterval(timer);

    let ok = (ans===current.name || ans===current.continent);
    if(ok){
        correct++;
    }else{
        wrong++;
        wrongList.push(current);
        alert("‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Ñ‡∏∑‡∏≠: " +
            (mode==="continent"?current.continent:current.name));
    }
    index++;
    nextQuestion();
}

// =======================
function countdown(){
    time--;
    document.getElementById("time").innerText=time;
    if(time<=0){
        wrong++;
        wrongList.push(current);
        index++;
        nextQuestion();
    }
}

// =======================
function pauseToMenu(){
    clearInterval(timer);
    paused=true;
    document.getElementById("game").classList.add("hidden");
    document.getElementById("menu").classList.remove("hidden");
}

// =======================
function endGame(){
    document.getElementById("game").classList.add("hidden");
    document.getElementById("summary").classList.remove("hidden");
    document.getElementById("sumCorrect").innerText=correct;
    document.getElementById("sumWrong").innerText=wrong;
}

// =======================
function reviewWrong(){
    questions=[...wrongList];
    index=0;
    wrongList=[];
    document.getElementById("summary").classList.add("hidden");
    document.getElementById("game").classList.remove("hidden");
    nextQuestion();
}

// =======================
function resetGame(){
    paused=false;
    document.getElementById("summary").classList.add("hidden");
    document.getElementById("menu").classList.remove("hidden");
}
</script>

</body>
</html>
